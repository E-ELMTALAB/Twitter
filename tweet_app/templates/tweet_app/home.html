{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three Vertical Sections with Lines and Colors</title>
    <!-- Include Bootstrap CSS via CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <style>
      /* Custom CSS for thin lines */
      .username {
        margin: 3px;
      }

      .card {
        margin: 15px;
      }

      .high_light {
        color: red;
      }

      /* .scroll {
        height:450px;
        overflow-y: scroll;
      } */
    </style>

    <script>
      // Capture the current scroll position
      const scrollPosition = window.scrollY;

      // Store the scroll position in local storage
      localStorage.setItem('scrollPosition', scrollPosition);
    </script>

  </head>
  <body>
    <div class="container-fluid">
      <div class="d-flex flex-row justify-content-center">
        <div class="card shadow rounded align-items-center" style="width: 300px; height:500px;">
          <div class="d-flex flex-column justify-content-center ">


            <div class="d-flex align-items-start mt-5 mb-4">
              <img class="rounded-circle" src="{{request.user.profile_picture_path.url}}" style="width:70px; height:70px;"/>
              <div class="mx-3">
                <h5 class="m-0">{{request.user.username}}</h5>
                <p class="m-0">{{request.user.email}}</p>
              </div>
            </div>

            <div class="d-flex flex-column mx-3">
              <h3>
                <a href="{% url 'home_page' %}" class="text-muted text-decoration-none">Home</a>
              </h3>
              <h3>
                <a href="{% url 'home_page' %}" class="text-muted text-decoration-none">trends</a>
              </h3>
              <h3>
                <a href="{% url 'home_page' %}" class="text-muted text-decoration-none">explore</a>
              </h3>
              <h3>
                <a href="{% url 'profile_page' %}" class="text-muted text-decoration-none">profile</a>
              </h3>
            </div>

              <div class="d-flex justify-content-start align-items-start my-4">
                <button
                type="button"
                class="btn btn-primary"
                data-toggle="modal"
                data-target="#exampleModal"
                data-whatever="@getbootstrap"
              >
                Open modal for @getbootstrap
              </button>
          
              <div
                class="modal fade"
                id="exampleModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label"
                            >Recipient:</label
                          >
                          <input type="text" class="form-control" id="recipient-name" />
                        </div>
                        <div class="form-group">
                          <label for="message-text" class="col-form-label"
                            >Message:</label
                          >
                          <textarea class="form-control" id="message-text"></textarea>
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Close
                      </button>
                      <button type="button" class="btn btn-primary">Send message</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>

        {% block content %}
        <div class="d-flex flex-column overflow-auto" style="height:750px; width:600px;" >
          {% for tweet in tweets reversed%}
          <div class="card rounded shadow">
            <div class="card-header">
              <div class="d-flex justify-content-start">
                <div class="d-flex align-items-start">
                  <img class="rounded-circle" src="{{tweet.user.profile_picture_path.url}}" style="width:50px; height:50px;"/>
                  <div class="mx-3">
                    <h5 class="m-0">{{tweet.user.username}}</h5>
                    <p class="m-0">{{tweet.timestamp|timesince}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="d-flex flex-row">
                <p>{{tweet.text}}</p>
              </div>
              <img src="{{tweet.image.url}}" style="width:100%;"/>
            </div>
            <div class="card-footer">
              <div class="d-flex post-actions">


                <form method="post" action="{% url 'buttons_clicked' pk=tweet.tweet_id %}" class="d-flex flex-row">
                  {% csrf_token %}
                  <div class="d-flx" id="like-button">
                    <button
                      type="submit"
                      class="btn btn-link d-flex align-items-center text-muted mx-4"
                      name="like_button_{{tweet.tweet_id}}"
                      value="{{tweet.tweet_id}}"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="feather feather-heart icon-md mb-0"
                        id="like-button"
                      >
                        <path
                          d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                        ></path>
                      </svg>
                      <p class="d-none d-md-block mx-1 my-2">Like</p>
                    </button>
                  </div>

                  <div class="d-flx" id="like-button">
                    <button
                      type="button"
                      class="btn btn-link d-flex align-items-center text-muted mx-4"
                      name="comment_button_{{tweet.tweet_id}}"
                      data-target="#CommentModal" 
                      data-toggle="modal"
                      data-whatever="@getbootstrap"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="feather feather-message-square icon-md mb-0"
                      >
                        <path
                          d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                        ></path>
                      </svg>
                      <p class="d-none d-md-block mx-1 my-2">Comment</p>
                    </button>
           
                    <div class="modal fade" id="CommentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <form>
                              <div class="form-group">
                                <label for="recipient-name" class="col-form-label">Recipient:</label>
                                <input type="text" class="form-control" id="recipient-name">
                              </div>
                              <div class="form-group">
                                <label for="message-text" class="col-form-label">Message:</label>
                                <textarea class="form-control" id="message-text"></textarea>
                              </div>
                            </form>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Send Comment </button>
                          </div>
                        </div>
                      </div>
                    </div>  



                  </div>

                  <div class="d-flx" id="like-button">
                    <button
                      type="button"
                      class="btn btn-link d-flex align-items-center text-muted mx-4"
                      name="share_button_{{tweet.tweet_id}}"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="feather feather-share icon-md mb-0"
                      >
                        <path
                          d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"
                        ></path>
                        <polyline points="16 6 12 2 8 6"></polyline>
                        <line x1="12" y1="2" x2="12" y2="15"></line>
                      </svg>
                      <p class="d-none d-md-block mx-1 my-2">Share</p>
                    </button>
                  </div>
                </form>


              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        {% endblock%}

        <div class="card rounded shadow" style="height:705px; width:300px;">
          <div class="d-flex flex-column shadow">
            <div class="d-flex flex-column shadow">
              <h1>what the fuck man </h1>
            </div>
            <div class="d-flex flex-column shadow">
              <h1>this is so good man </h1>
              <button onclick="showCommentModal()">Click me!</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Include Popper.js via CDN -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@2.11.6/dist/umd/popper.min.js"></script> -->

    <!-- Include Bootstrap JS via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- Include jQuery (required by Bootstrap) via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script> 

    <script src="{% static 'js/script.js' %}" ></script>

    <script>
      function refreshPage() {
          // Restore the scroll position
          const storedScrollPosition = localStorage.getItem('scrollPosition');
  
          if (storedScrollPosition !== null) {
              window.scrollTo(0, parseInt(storedScrollPosition, 10));
              localStorage.removeItem('scrollPosition');
          }
  
          // Initiate the page refresh
          window.location = window.location;
      }
  </script>


  </body>
</html>
